---
title: "Costa Rica: Estadísticas del comportamiento de los Casos de covid-19 para el viernes 22 de octubre del 2021"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
---

```{r setup, include=FALSE}
library(flexdashboard)

defaultEncoding <- "UTF8"
library(dplyr)
library(sf)
library(terra)
library(raster)
library(DT)
library(ggplot2)
library(plotly)
library(leaflet)
library(dygraphs)

```
```{r datos , warning=FALSE, message=FALSE}
casos <-
  st_read("/vsicurl/https://marcelocubero.github.io/capas_proyecto/casos.geojson",
          quiet = TRUE)
casos <-
  casos %>%
  st_transform(4326)

casos_ <-
  read.csv(file = "https://marcelocubero.github.io/capas_proyecto/casos_.csv",
           sep = ",",
           encoding = "UTF-8")


fallecidos <-
  rast("/vsicurl/https://marcelocubero.github.io/capas_proyecto/fallecidos.tif")

```

colum {data-width=350}
-----------------------------------------------------------------------

### Texto

```{r setup, include=FALSE}
library(dygraphs)
```

Row {data-height=600}
-------------------------------------

### All Lung Deaths

```{r}
dygraph(ldeaths)
```

Row {data-height=400}
-------------------------------------

### Male Deaths

```{r}
dygraph(mdeaths)
```

### About dygraphs

This example makes use of the dygraphs R package. The dygraphs
package provides rich facilities for charting time-series data 
in R. You can use dygraphs at the R console, within R Markdown
documents, and within Shiny applications.

```

Column {data-width=350}
-----------------------------------------------------------------------

### Casos activos y positivos por cantón y provincia

```{r}
casos_ %>%
  select(Cantón= canton,Provincia= provincia, Casos_Activos= activos, Casos_Positivos= positivos) %>%
datatable( casos_, options = list(
  language = list(url = '//cdn.datatables.net/plug-ins/1.10.11/i18n/Spanish.json'),
  pageLength = 15
))
```

Casos positivos por cantón {data-orientation=rows}
===================================== 
Row {data-height=650}
-----------------------------------------------------------------------

### Casos positivos por cantón

```{r}
ggplot(casos_, aes(x= canton, y= positivos)) +
  geom_col( width = 0.5, fill= "Red") +
  ggtitle("Casos Positivos por cantón") +
  xlab("Cantón") +
  ylab("Cantidad de casos positivos") +
   theme(
    plot.title = element_text(size = 16, face = "bold"),
    text = element_text(size=8),
    axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)
  ) 
```

Casos activos por cantón {data-orientation=rows}
===================================== 
Row {data-height=650}
-----------------------------------------------------------------------
### Casos activos por cantón

```{r}
ggplot(casos_, aes(x= canton, y= activos)) +
  geom_col( width = 0.5, fill= "Brown") +
  ggtitle("Casos Activos por cantón") +
  xlab("Cantón") +
  ylab("Cantidad de casos activos") +
   theme(
    plot.title = element_text(size = 16, face = "bold"),
    text = element_text(size=8),
    axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1)
  )
```
